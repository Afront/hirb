<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
  <head>
    <title>File: README.rdoc [RDoc Documentation]</title>
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
    <link href='.././rdoc-style.css' media='screen' rel='stylesheet' type='text/css'>
    <script type='text/javascript'>
      //<![CDATA[
        function popupCode(url) {
          window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
        }
        
        function toggleCode(id) {
          var code = document.getElementById(id)
        
          code.style.display = code.style.display != 'block' ? 'block' : 'none'
          return true
        }
        
        // Make codeblocks hidden by default
        document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
      //]]>
    </script>
  </head>
  <body class='page'>
    <div class='file' id='wrapper'>
      <div class='header'>
        <h1 class='name'>README.rdoc</h1>
        <div class='paths'>
          README.rdoc
        </div>
        <div class='last-update'>
          Last Update:
          <span class='datetime'>Fri Mar 20 03:05:11 -0400 2009</span>
        </div>
      </div>
      <div id='content'>
        <div id='text'>
          <div id='description'>
            <h2>Description</h2>
            <p>
            <a href="../classes/Hirb.html">Hirb</a> currently provides a mini view
            framework for console applications, designed with irb in mind. Given the
            output of a console application, it renders a view if there is one
            configured, based on the output&#8217;s class. The framework encourages
            reusing views by letting you package them in classes and associate them
            with any number of output classes. <a href="../classes/Hirb.html">Hirb</a>
            comes with tree views (see <a
            href="../classes/Hirb/Helpers/Tree.html">Hirb::Helpers::Tree</a>) and table
            views (see <a
            href="../classes/Hirb/Helpers/Table.html">Hirb::Helpers::Table</a>). By
            default <a href="../classes/Hirb.html">Hirb</a> displays Rails&#8217; model
            classes as tables.
            </p>
            <h2>Install</h2>
            <p>
            Install the gem with:
            </p>
            <pre>sudo gem install cldwalker-hirb --source http://gems.github.com</pre>
            <h2>Rails Example</h2>
            <p>
            Let&#8217;s load and enable the view framework:
            </p>
            <pre>bash&gt; script/console&#x000A;Loading local environment (Rails 2.2.2)&#x000A;irb&gt;&gt; require 'hirb'&#x000A;=&gt; true&#x000A;irb&gt;&gt; Hirb::View.enable&#x000A;=&gt; nil</pre>
            <p>
            The default configuration provides table views for ActiveRecord::Base
            descendants. If a class isn&#8217;t configured, <a
            href="../classes/Hirb.html">Hirb</a> reverts to irb&#8217;s default echo
            mode.
            </p>
            <pre>irb&gt;&gt; Hirb::View.output_config&#x000A;=&gt; {&quot;ActiveRecord::Base&quot;=&gt;{:class=&gt;&quot;Hirb::Views::ActiveRecord_Base&quot;, :ancestor=&gt;true}}&#x000A;&#x000A;# Tag is a model class and descendant of ActiveRecord::Base&#x000A;irb&gt;&gt; Tag.last&#x000A;+-----+-------------------------+-------------+---------------+-----------+-----------+-------+&#x000A;| id  | created_at              | description | name          | namespace | predicate | value |&#x000A;+-----+-------------------------+-------------+---------------+-----------+-----------+-------+&#x000A;| 907 | 2009-03-06 21:10:41 UTC |             | gem:tags=yaml | gem       | tags      | yaml  |&#x000A;+-----+-------------------------+-------------+---------------+-----------+-----------+-------+&#x000A;1 row in set&#x000A;&#x000A;irb&gt;&gt; 'plain ol irb'&#x000A;=&gt; 'plain ol irb'&#x000A;irb&gt;&gt; :blah&#x000A;=&gt; :blah</pre>
            <p>
            From above you can see there were no views configured for a String or a
            Symbol so <a href="../classes/Hirb.html">Hirb</a> defaulted to irb&#8217;s
            echo mode. Also note that Tag was able to inherit its view from the
            ActiveRecord::Base config because it had an :ancestor option.
            </p>
            <p>
            Now that you understand that <a href="../classes/Hirb.html">Hirb</a>
            displays views based on an output object&#8217;s class, you may appreciate
            it also detects configured output objects in an array:
            </p>
            <pre>irb&gt;&gt; Tag.all :limit=&gt;3, :order=&gt;&quot;id DESC&quot;&#x000A;+-----+-------------------------+-------------+-------------------+-----------+-----------+----------+&#x000A;| id  | created_at              | description | name              | namespace | predicate | value    |&#x000A;+-----+-------------------------+-------------+-------------------+-----------+-----------+----------+&#x000A;| 907 | 2009-03-06 21:10:41 UTC |             | gem:tags=yaml     | gem       | tags      | yaml     |&#x000A;| 906 | 2009-03-06 08:47:04 UTC |             | gem:tags=nomonkey | gem       | tags      | nomonkey |&#x000A;| 905 | 2009-03-04 00:30:10 UTC |             | article:tags=ruby | article   | tags      | ruby     |&#x000A;+-----+-------------------------+-------------+-------------------+-----------+-----------+----------+&#x000A;3 rows in set</pre>
            <p>
            At any time you can disable <a href="../classes/Hirb.html">Hirb</a> if you
            really like irb&#8217;s lovely echo mode:
            </p>
            <pre>irb&gt;&gt; Hirb::View.disable&#x000A;=&gt; nil&#x000A;irb&gt;&gt; Tag.all :limit=&gt;3, :order=&gt;&quot;id DESC&quot;&#x000A;=&gt; [#&lt;Tag id: 907, name: &quot;gem:tags=yaml&quot;, description: nil, created_at: &quot;2009-03-06 21:10:41&quot;,&#x000A;namespace: &quot;gem&quot;, predicate: &quot;tags&quot;, value: &quot;yaml&quot;&gt;, #&lt;Tag id: 906, name: &quot;gem:tags=nomonkey&quot;,&#x000A;description: nil, created_at: &quot;2009-03-06 08:47:04&quot;, namespace: &quot;gem&quot;, predicate: &quot;tags&quot;, value:&#x000A;&quot;nomonkey&quot;&gt;, #&lt;Tag id: 905, name: &quot;article:tags=ruby&quot;, description: nil, created_at: &quot;2009-03-04&#x000A;00:30:10&quot;, namespace: &quot;article&quot;, predicate: &quot;tags&quot;, value: &quot;ruby&quot;&gt;]</pre>
            <h2>Views: Anytime, Anywhere</h2>
            <p>
            While preconfigured tables are great for database records, sometimes you
            just want to create tables/views for any output object:
            </p>
            <pre>#These examples don't need to have Hirb::View enabled.&#x000A;irb&gt;&gt;Hirb::View.disable&#x000A;=&gt;nil&#x000A;&#x000A;# Imports table() and view()&#x000A;irb&gt;&gt;extend Hirb::Console&#x000A;=&gt;main&#x000A;&#x000A;# Create a table of Dates comparing them with different formats.&#x000A;irb&gt;&gt; table [Date.today, Date.today.next_month], :fields=&gt;[:to_s, :ld, :ajd, :amjd, :asctime]&#x000A;+------------+--------+-----------+-------+--------------------------+&#x000A;| to_s       | ld     | ajd       | amjd  | asctime                  |&#x000A;+------------+--------+-----------+-------+--------------------------+&#x000A;| 2009-03-11 | 155742 | 4909803/2 | 54901 | Wed Mar 11 00:00:00 2009 |&#x000A;| 2009-04-11 | 155773 | 4909865/2 | 54932 | Sat Apr 11 00:00:00 2009 |&#x000A;+------------+--------+-----------+-------+--------------------------+&#x000A;2 rows in set&#x000A;&#x000A;# Same table as the previous method. However view() will be able to call any view created.&#x000A;irb&gt;&gt; view [Date.today, Date.today.next_month], :class=&gt;Hirb::Helpers::ObjectTable,&#x000A;  :fields=&gt;[:to_s, :ld, :ajd, :amjd, :asctime]</pre>
            <p>
            If these console methods weren&#8217;t convenient enough, try:
            </p>
            <pre># Imports view() to all objects.&#x000A;irb&gt;&gt; require 'hirb/import_object'&#x000A;=&gt;true&#x000A;# Yields same table as above examples.&#x000A;irb&gt;&gt; [Date.today, Date.today.next_month].view :class=&gt;Hirb::Helpers::ObjectTable,&#x000A;  :fields=&gt;[:to_s, :ld, :ajd, :amjd, :asctime]</pre>
            <p>
            Although views by default are printed to STDOUT, they can be easily
            modified to write anywhere:
            </p>
            <pre># Setup views to write to file 'console.log'.&#x000A;irb&gt;&gt; Hirb::View.render_method = lambda {|output| File.open(&quot;console.log&quot;, 'w') {|f| f.write(output) } }&#x000A;&#x000A;# Writes to file with same table output as above example.&#x000A;irb&gt;&gt; view [Date.today, Date.today.next_month], :class=&gt;Hirb::Helpers::ObjectTable,&#x000A;  :fields=&gt;[:to_s, :ld, :ajd, :amjd, :asctime]&#x000A;&#x000A;# Doesn't write to file because Symbol isn't configured to use Hirb::View and thus defaults to irb's echo mode.&#x000A;irb&gt;&gt; :blah&#x000A;=&gt;:blah&#x000A;&#x000A;# Go back to printing Hirb views to STDOUT.&#x000A;irb&gt;&gt; Hirb::View.reset_render_method</pre>
            <h2>Create and Configure Views</h2>
            <p>
            Let&#8217;s create a simple view and configure it in different ways to be
            Hash&#8217;s default view:
            </p>
            <h3>Setup</h3>
            <pre>irb&gt;&gt; require 'hirb'&#x000A;=&gt;true&#x000A;irb&gt;&gt; Hirb::View.enable&#x000A;=&gt;nil&#x000A;irb&gt;&gt; require 'yaml'&#x000A;=&gt;true</pre>
            <h3>Configure As View Method</h3>
            <p>
            A view method is the smallest reuseable view.
            </p>
            <pre># Create yaml view method&#x000A;irb&gt;&gt; def yaml(output); output.to_yaml; end&#x000A;=&gt;nil&#x000A;&#x000A;# Configure view and reload it&#x000A;irb&gt;&gt;Hirb::View.output_config = {&quot;Hash&quot;=&gt;{:method=&gt;:yaml}}&#x000A;=&gt;{&quot;Hash&quot;=&gt;{:method=&gt;:yaml}}&#x000A;irb&gt;&gt;Hash::View.reload_config&#x000A;=&gt;true&#x000A;&#x000A;# Hashes now appear as yaml&#x000A;irb&gt;&gt;{:a=&gt;1, :b=&gt;{:c=&gt;3}}&#x000A;---&#x000A;:a : 1&#x000A;:b :&#x000A;  :c : 3&#x000A;=&gt; true</pre>
            <h3>Configure As View Class</h3>
            <p>
            A view class is suited for more complex views. View classes can be under
            any namespace and are expected to provide a render method. However, if a
            class is under the <a href="../classes/Hirb/Views.html">Hirb::Views</a>
            namespace, it will be automatically loaded with no configuration. Something
            to think about when sharing views with others.
            </p>
            <pre># Create yaml view class&#x000A;irb&gt;&gt; class Hirb::Views::Hash; def self.render(output, options={}); output.to_yaml; end ;end&#x000A;=&gt;nil&#x000A;# Just reload since no configuration is necessary&#x000A;irb&gt;&gt;Hirb::View.reload_config&#x000A;&#x000A;# Hashes now appear as yaml ...</pre>
            <p>
            Although the <a href="../classes/Hirb/Views.html">Hirb::Views</a> namespace
            is great for quick classes that just plug and play, you often want view
            classes that can be reused with multiple outputs. For this case, it&#8217;s
            recommended to use the Hirb::Helpers namespace.
            </p>
            <pre># Create yaml view class&#x000A;irb&gt;&gt; class Hirb::Helpers::Yaml; def self.render(output, options={}); output.to_yaml; end ;end&#x000A;=&gt;nil&#x000A;&#x000A;# Configure view and reload it&#x000A;irb&gt;&gt;Hirb::View.output_config = {&quot;Hash&quot;=&gt;{:class=&gt;&quot;Hirb::Helpers::Yaml&quot;}}&#x000A;=&gt;{&quot;Hash&quot;=&gt;{:class=&gt;&quot;Hirb::Helpers::Yaml&quot;}}&#x000A;irb&gt;&gt;Hirb::View.reload_config&#x000A;&#x000A;# Hashes now appear as yaml ...</pre>
            <h3>Configure At Startup</h3>
            <p>
            Once you know what views are associated with what output classes, you can
            configure them at startup by passing <a
            href="../classes/Hirb/View.html#M000014">Hirb::View.enable</a> a block:
            </p>
            <pre># In .irbrc&#x000A;require 'hirb'&#x000A;# View class needs to come before enable()&#x000A;class Hirb::Helpers::Yaml; def self.render(output, options={}); output.to_yaml; end ;end&#x000A;Hirb::View.enable {|conf| conf.output = {&quot;Hash&quot;=&gt;{:class=&gt;&quot;Hirb::Helpers::Yaml&quot;}} }</pre>
            <p>
            Or by creating a config file at config/hirb.yml or ~/.hirb.yml:
            </p>
            <pre># The config file for the yaml example would look like:&#x000A;# ---&#x000A;# :view :&#x000A;#  :output :&#x000A;#    Hash :&#x000A;#      :class : Hirb::Helpers::Yaml&#x000A;&#x000A;# In .irbrc&#x000A;require 'hirb'&#x000A;# View class needs to come before enable()&#x000A;class Hirb::Helpers::Yaml; def self.render(output, options={}); output.to_yaml; end ;end&#x000A;Hirb::View.enable</pre>
            <h2>Contributing Views</h2>
            <p>
            If you have views of your own you&#8217;d like to share, fork <a
            href="../classes/Hirb.html">Hirb</a> and put your views under the
            Hirb::Helpers namespace and the view files under lib/hirb/helpers/.
            </p>
            <h2>Limitations</h2>
            <p>
            Although <a href="../classes/Hirb.html">Hirb</a> preserves Wirble
            colorizing irb&#8217;s default echo mode, it doesn&#8217;t colorize its own
            views. This is mainly because colorizing caused table classes to render
            incorrectly. If you can get tables and colors to work nicely, please fork.
            To colorize your <a href="../classes/Hirb.html">Hirb</a> output:
            </p>
            <pre>Hirb::View.render_method = lambda {|output| puts Wirble::Colorize.colorize(output) }</pre>
            <h2>Motivation</h2>
            <p>
            Table code from <a
            href="http://gist.github.com/72234">gist.github.com/72234</a> and <a
            href="http://github.com/cldwalker/tag-tree">my console app's needs</a>.
            </p>
            <h2>Bugs</h2>
            <p>
            Please report them as tickets here: <a
            href="http://cldwalker.lighthouseapp.com/projects/27735-hirb/tickets">cldwalker.lighthouseapp.com/projects/27735-hirb/tickets</a>
            </p>
            <h2>Links</h2>
            <ul>
            <li><a
            href="http://tagaholic.me/2009/03/13/hirb-irb-on-the-good-stuff.html">tagaholic.me/2009/03/13/hirb-irb-on-the-good-stuff.html</a>
            
            </li>
            <li><a
            href="http://tagaholic.me/2009/03/18/ruby-class-trees-rails-plugin-trees-with-hirb.html">tagaholic.me/2009/03/18/ruby-class-trees-rails-plugin-trees-with-hirb.html</a>
            
            </li>
            </ul>
            <h2>Todo</h2>
            <ul>
            <li>Configurable max height, which if exceeded activates a pager.
            
            </li>
            <li>Possibly add non-view irb goodies ie command manager.
            
            </li>
            <li>Consider applying multiple views/filters to output.
            
            </li>
            <li>Provides helper methods to all view classes.
            
            </li>
            <li>Consider adding a template system as needed.
            
            </li>
            </ul>
          </div>
          <div id='section'>
          </div>
        </div>
      </div>
      <div id='footer-push'></div>
    </div>
    <div id='footer'>
      <a href="http://github.com/mislav/hanna/tree/master"><strong>Hanna</strong> RDoc template</a>
    </div>
  </body>
</html>

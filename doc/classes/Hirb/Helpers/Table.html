<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
  <head>
    <title>: Hirb::Helpers::Table [RDoc Documentation]</title>
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
    <link href='../../../rdoc-style.css' media='screen' rel='stylesheet' type='text/css'>
    <script type='text/javascript'>
      //<![CDATA[
        function popupCode(url) {
          window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
        }
        
        function toggleCode(id) {
          var code = document.getElementById(id)
        
          code.style.display = code.style.display != 'block' ? 'block' : 'none'
          return true
        }
        
        // Make codeblocks hidden by default
        document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
      //]]>
    </script>
  </head>
  <body class='page'>
    <div class='class' id='wrapper'>
      <div class='header'>
        <h1 class='name'>
          <span class='type'>Class</span>
          Hirb::Helpers::Table
        </h1>
        <ol class='paths'>
          <li>
            <a href="../../../files/lib/hirb/helpers/table/filters_rb.html">lib/hirb/helpers/table/filters.rb</a>
          </li>
          <li class='other'>
            <a href="../../../files/lib/hirb/helpers/table/resizer_rb.html">lib/hirb/helpers/table/resizer.rb</a>
          </li>
          <li class='other'>
            <a href="../../../files/lib/hirb/helpers/table_rb.html">lib/hirb/helpers/table.rb</a>
          </li>
          <li>
            <a class='show' href='#' onclick='this.parentNode.parentNode.className += " expanded"; this.parentNode.removeChild(this); return false'>show all</a>
          </li>
        </ol>
        <div class='parent'>
          Parent:
          <strong>Object</strong>
        </div>
      </div>
      <div id='content'>
        <div id='text'>
          <div id='description'>
            <p>
            Base <a href="Table.html">Table</a> class from which other table classes
            inherit. By default, a table is constrained to a default width but this can
            be adjusted via the max_width option or <a
            href="../View.html#M000040">Hirb::View.width</a>. Rows can be an array of
            arrays or an array of hashes.
            </p>
            <p>
            An array of arrays ie [[1,2], [2,3]], would render:
            </p>
            <pre>+---+---+&#x000A;| 0 | 1 |&#x000A;+---+---+&#x000A;| 1 | 2 |&#x000A;| 2 | 3 |&#x000A;+---+---+</pre>
            <p>
            By default, the fields/columns are the numerical indices of the array.
            </p>
            <p>
            An array of hashes ie [{:age=>10, :weight=>100}, {:age=>80, :weight=>500}],
            would render:
            </p>
            <pre>+-----+--------+&#x000A;| age | weight |&#x000A;+-----+--------+&#x000A;| 10  | 100    |&#x000A;| 80  | 500    |&#x000A;+-----+--------+</pre>
            <p>
            By default, the fields/columns are the keys of the first hash.
            </p>
            <h3>Custom Callbacks</h3>
            <p>
            Callback methods can be defined to add your own options that modify rows
            right before they are rendered. Here&#8217;s an example that allows for
            searching with a :query option:
            </p>
            <pre>module Query&#x000A;  # Searches fields given a query hash&#x000A;  def query_callback(rows, options)&#x000A;    return rows unless options[:query]&#x000A;    options[:query].map {|field,query|&#x000A;      rows.select {|e| e[field].to_s =~ /#{query}/i }&#x000A;    }.flatten.uniq&#x000A;  end&#x000A;end&#x000A;Hirb::Helpers::Table.send :include, Query&#x000A;&#x000A;&gt;&gt; puts Hirb::Helpers::Table.render [{:name=&gt;'batman'}, {:name=&gt;'robin'}], :query=&gt;{:name=&gt;'rob'}&#x000A;+-------+&#x000A;| name  |&#x000A;+-------+&#x000A;| robin |&#x000A;+-------+&#x000A;1 row in set</pre>
            <p>
            Callback methods:
            </p>
            <ul>
            <li>must be defined in <a href="Table.html">Helpers::Table</a> and end in
            &#8216;_callback&#8217;.
            
            </li>
            <li>should expect rows and a hash of render options. Rows will be an array of
            hashes.
            
            </li>
            <li>are expected to return an array of hashes.
            
            </li>
            <li>are invoked in alphabetical order.
            
            </li>
            </ul>
            <p>
            For a thorough example, see <a
            href="http://github.com/cldwalker/boson/blob/master/lib/boson/pipe.rb">Boson::Pipe</a>.
            </p>
          </div>
          <div id='method-list'>
            <h2>Methods</h2>
            <h3>public class</h3>
            <ol>
              <li><a href="#M000008">render</a></li>
            </ol>
          </div>
          <div id='section'>
            <div id='class-list'>
              <h2>Classes and Modules</h2>
              Module <a href="Table/Filters.html" class="link">Hirb::Helpers::Table::Filters</a><br />
              Class <a href="Table/Resizer.html" class="link">Hirb::Helpers::Table::Resizer</a><br />
              Class <a href="Table/TooManyFieldsForWidthError.html" class="link">Hirb::Helpers::Table::TooManyFieldsForWidthError</a><br />
            </div>
            <div id='constants-list'>
              <h2>Constants</h2>
              <div class='name-list'>
                <table summary='Constants'>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>BORDER_LENGTH</td>
                    <td>=</td>
                    <td class='context-item-value'>3</td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>MIN_FIELD_LENGTH</td>
                    <td>=</td>
                    <td class='context-item-value'>3</td>
                  </tr>
                </table>
              </div>
            </div>
            <div id='attribute-list'>
              <h2 class='section-bar'>Attributes</h2>
              <div class='name-list'>
                <table>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>filter_any</td>
                    <td class='context-item-value'>[RW]</td>
                    <td class='context-item-desc'>
                      
                      Boolean which sets the default for :filter_any option.
                    </td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>filter_classes</td>
                    <td class='context-item-value'>[RW]</td>
                    <td class='context-item-desc'>
                      
                      A hash which maps a cell value&#8217;s class to a filter. This serves to
                      set a default filter per field if all of its values are a class in this
                      hash. By default, Array values are comma joined and Hashes are inspected.
                      See the :filter_any option to apply this filter per value.
                    </td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>last_table</td>
                    <td class='context-item-value'>[RW]</td>
                    <td class='context-item-desc'>
                      
                      Holds last table object created
                    </td>
                  </tr>
                </table>
              </div>
            </div>
            <div id='methods'>
              <h2>Public class methods</h2>
              <div class='public-class method' id='method-M000008'>
                <a name='M000008'>      </a>
                <div class='synopsis'>
                  <span class='name'>render</span>
                  <span class='arguments'>(rows, options={})</span>
                </div>
                <div class='description'>
                  <p>
                  Main method which returns a formatted table.
                  </p>
                  <h4>Options:</h4>
                  <dl>
                  <dt><b>:fields</b></dt><dd>An array which overrides the default fields and can be used to indicate
                  field order.
                  
                  </dd>
                  <dt><b>:headers</b></dt><dd>A hash of fields and their header names. Fields that aren&#8217;t specified
                  here default to their name. When set to false, headers are hidden. Can also
                  be an array but only for array rows.
                  
                  </dd>
                  <dt><b>:max_fields</b></dt><dd>A hash of fields and their maximum allowed lengths. Maximum length can also
                  be a percentage of the total width (decimal less than one). When a field
                  exceeds it&#8217;s maximum then it&#8217;s truncated and has a &#8230;
                  appended to it. Fields that aren&#8217;t specified have no maximum.
                  
                  </dd>
                  <dt><b>:max_width</b></dt><dd>The maximum allowed width of all fields put together including field
                  borders. Only valid when :resize is true. Default is <a
                  href="../View.html#M000040">Hirb::View.width</a>.
                  
                  </dd>
                  <dt><b>:resize</b></dt><dd>Resizes table to display all columns in allowed :max_width. Default is
                  true. Setting this false will display the full length of each field.
                  
                  </dd>
                  <dt><b>:number</b></dt><dd>When set to true, numbers rows by adding a :hirb_number column as the first
                  column. Default is false.
                  
                  </dd>
                  <dt><b>:change_fields</b></dt><dd>A hash to change old field names to new field names. This can also be an
                  array of new names but only for array rows. This is useful when wanting to
                  change auto-generated keys to more user-friendly names i.e. for array rows.
                  
                  </dd>
                  <dt><b>:filters</b></dt><dd>A hash of fields and their filters, applied to every row in a field. A
                  filter can be a proc, an instance method applied to the field value or a <a
                  href="Table/Filters.html">Filters</a> method. Also see the filter_classes
                  attribute below.
                  
                  </dd>
                  <dt><b>:header_filter</b></dt><dd>A filter, like one in :filters, that is applied to all headers after the
                  :headers option.
                  
                  </dd>
                  <dt><b>:filter_any</b></dt><dd>When set to true, any cell defaults to being filtered by its class in
                  :filter_classes. Default Hirb::Helpers::Table.filter_any().
                  
                  </dd>
                  <dt><b>:filter_classes</b></dt><dd>Hash which maps classes to filters. Default is
                  Hirb::Helpers::Table.filter_classes().
                  
                  </dd>
                  <dt><b>:vertical</b></dt><dd>When set to true, renders a vertical table using <a
                  href="VerticalTable.html">Hirb::Helpers::VerticalTable</a>. Default is
                  false.
                  
                  </dd>
                  <dt><b>:all_fields</b></dt><dd>When set to true, renders fields in all rows. Valid only in rows that are
                  hashes. Default is false.
                  
                  </dd>
                  <dt><b>:description</b></dt><dd>When set to true, renders row count description at bottom. Default is true.
                  
                  </dd>
                  <dt><b>:escape_special_chars</b></dt><dd>When set to true, escapes special characters n,t,r so they don&#8217;t
                  disrupt tables. Default is false for vertical tables and true for anything
                  else.
                  
                  </dd>
                  </dl>
                  <p>
                  Examples:
                  </p>
                  <pre>Hirb::Helpers::Table.render [[1,2], [2,3]]&#x000A;Hirb::Helpers::Table.render [[1,2], [2,3]], :max_fields=&gt;{0=&gt;10}, :header_filter=&gt;:capitalize&#x000A;Hirb::Helpers::Table.render [['a',1], ['b',2]], :change_fields=&gt;%w{letters numbers}, :max_fields=&gt;{'numbers'=&gt;0.4}&#x000A;Hirb::Helpers::Table.render [{:age=&gt;10, :weight=&gt;100}, {:age=&gt;80, :weight=&gt;500}]&#x000A;Hirb::Helpers::Table.render [{:age=&gt;10, :weight=&gt;100}, {:age=&gt;80, :weight=&gt;500}], :headers=&gt;{:weight=&gt;&quot;Weight(lbs)&quot;}&#x000A;Hirb::Helpers::Table.render [{:age=&gt;10, :weight=&gt;100}, {:age=&gt;80, :weight=&gt;500}], :filters=&gt;{:age=&gt;[:to_f]}</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000008-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000008-source'><span class="ruby-comment cmt"># File lib/hirb/helpers/table.rb, line 100</span>&#x000A;    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">render</span>(<span class="ruby-identifier">rows</span>, <span class="ruby-identifier">options</span>={})&#x000A;      <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:vertical</span>] <span class="ruby-operator">?</span> <span class="ruby-constant">Helpers</span><span class="ruby-operator">::</span><span class="ruby-constant">VerticalTable</span>.<span class="ruby-identifier">render</span>(<span class="ruby-identifier">rows</span>, <span class="ruby-identifier">options</span>) <span class="ruby-operator">:</span>&#x000A;      <span class="ruby-identifier">new</span>(<span class="ruby-identifier">rows</span>, <span class="ruby-identifier">options</span>).<span class="ruby-identifier">render</span>&#x000A;    <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">TooManyFieldsForWidthError</span>&#x000A;      <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-value str">&quot;** Error: Too many fields for the current width. Configure your width &quot;</span> <span class="ruby-operator">+</span>&#x000A;        <span class="ruby-value str">&quot;and/or fields to avoid this error. Defaulting to a vertical table. **&quot;</span>&#x000A;      <span class="ruby-constant">Helpers</span><span class="ruby-operator">::</span><span class="ruby-constant">VerticalTable</span>.<span class="ruby-identifier">render</span>(<span class="ruby-identifier">rows</span>, <span class="ruby-identifier">options</span>)&#x000A;    <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id='footer-push'></div>
    </div>
    <div id='footer'>
      <a href="http://github.com/mislav/hanna/tree/master"><strong>Hanna</strong> RDoc template</a>
    </div>
  </body>
</html>
